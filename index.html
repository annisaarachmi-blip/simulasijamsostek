<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulasi Iuran BPJS Ketenagakerjaan</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{font-family:'Nunito Sans',sans-serif;background:#f4f6f9;margin:0;}
.container{max-width:960px;margin:auto;background:#fff;padding:25px;border-radius:12px;}
.branding{display:flex;justify-content:space-between;font-weight:700;margin-bottom:10px;}
h2{text-align:center;color:#0a4fb3;}
.section{border:1px solid #ddd;padding:20px;margin-top:20px;border-radius:10px;}
.hidden{display:none;}
label{display:block;margin-top:10px;}
input,select,button{padding:7px;margin-top:5px;font-family:'Nunito Sans',sans-serif;}
button{background:#0a4fb3;color:#fff;border:none;border-radius:6px;cursor:pointer;padding:6px 14px;font-size:13px;}
button.reset{background:#888;}
button.print{background:#2c7a2c;}
.checkbox-row{display:flex;gap:20px;margin-top:10px;flex-wrap:wrap;}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;}
th{background:#f1f5ff;}
.summary{background:#eef6ff;padding:15px;margin-top:15px;border-left:5px solid #0a4fb3;}
.footer{margin-top:30px;font-size:14px;}

@media print{
  button, select, input {display:none!important;}
  body{background:#fff;}
  .container{box-shadow:none;border:none;}
}
@media print{
  body{background:#fff;}
  button, select, input, .reset, .print{display:none !important;}
  .section{border:none; padding:10px;}
  .container{max-width:100%; padding:0;}
  .footer{page-break-before:avoid;}
}
</style>
</head>

<body>
<div class="container">

<div class="branding">
  <div>Provinsi Jawa Timur</div>
  <div>BPJS Ketenagakerjaan Kanwil Jatim</div>
</div>

<h2>Simulasi Penganggaran<br>Jaminan Sosial Ketenagakerjaan</h2>

<div class="section">
  <h3>Metode Simulasi</h3>
  <select id="metode">
    <option value="">-- Pilih Metode --</option>
    <option value="sasaran">Sesuai Sasaran</option>
    <option value="anggaran">Sesuai Ketersediaan Anggaran</option>
  </select>
</div>

<div id="boxSasaran" class="section hidden">
  <h3>Simulasi Sesuai Sasaran</h3>

  <label>Jenis Sasaran</label>
  <div class="checkbox-row">
    <label><input type="checkbox" id="s_nonasn"> PU</label>
    <label><input type="checkbox" id="s_bpu"> BPU (Pekerja Rentan)</label>
  </div>

  <div id="sasaranNonASN" class="hidden">
    <h4>PU</h4>
    <label>Upah (Rp)</label>
    <input type="text" id="upahS" class="input-number" value="3.000.000">
    <label>Jumlah Orang</label>
    <input type="text" id="orgSNon" class="input-number" value="100">
    <label>Bulan Perlindungan</label>
    <input type="text" id="blnSNon" class="input-number" value="12">
    <div class="checkbox-row">
      <label><input type="checkbox" id="jhtSNon"> JHT 5,7%</label>
      <label><input type="checkbox" id="jpSNon"> JP 3%</label>
    </div>
  </div>

  <div id="sasaranBPU" class="hidden">
    <h4>BPU (Pekerja Rentan)</h4>
    <label>Jumlah Orang</label>
    <input type="text" id="orgSBPU" class="input-number" value="100">
    <label>Bulan Perlindungan</label>
    <input type="text" id="blnSBPU" class="input-number" value="12">
    <label><input type="checkbox" id="jhtSBPU"> Tambah JHT (Rp20.000)</label>
  </div>

  <button onclick="hitungSasaran()">Hitung</button>
</div>

<div id="boxAnggaran" class="section hidden">
  <h3>Simulasi Sesuai Ketersediaan Anggaran</h3>

  <label>Total Anggaran (Rp)</label>
  <input type="text" id="totalAnggaran" class="input-number">

  <label>Jenis Sasaran</label>
  <div class="checkbox-row">
    <label><input type="checkbox" id="a_nonasn"> PU</label>
    <label><input type="checkbox" id="a_bpu"> BPU (Pekerja Rentan)</label>
  </div>

  <label>Tujuan Perhitungan</label>
  <select id="tujuan">
    <option value="">-- Pilih --</option>
    <option value="orang">Mencari Jumlah Orang</option>
    <option value="bulan">Mencari Bulan Perlindungan</option>
  </select>

  <div id="angNonASN" class="hidden">
    <h4>PU</h4>
    <label>Upah (Rp)</label>
    <input type="text" id="upahA" class="input-number" value="3.000.000">
    <label id="lblOrgA">Jumlah Orang</label>
    <input type="text" id="orgA" class="input-number" value="100">
    <label id="lblBlnA">Bulan Perlindungan</label>
    <input type="text" id="blnA" class="input-number" value="12">
    <div class="checkbox-row">
      <label><input type="checkbox" id="jhtA"> JHT 5,7%</label>
      <label><input type="checkbox" id="jpA"> JP 3%</label>
    </div>
  </div>

  <div id="angBPU" class="hidden">
    <h4>BPU (Pekerja Rentan)</h4>
    <label id="lblOrgB">Jumlah Orang</label>
    <input type="text" id="orgB" class="input-number" value="100">
    <label id="lblBlnB">Bulan Perlindungan</label>
    <input type="text" id="blnB" class="input-number" value="12">
    <label><input type="checkbox" id="jhtB"> Tambah JHT (Rp20.000)</label>
  </div>

  <button onclick="hitungAnggaran()">Hitung</button>
</div>

<div id="hasil" class="section hidden">
  <h3>Hasil Simulasi</h3>
  <table id="tabel">
    <tr>
      <th>Jenis</th>
      <th>Orang</th>
      <th>Bulan</th>
      <th>Iuran / Bulan</th>
      <th>Total</th>
    </tr>
  </table>
  <div class="summary" id="kesimpulan"></div>
  <button class="print" onclick="window.print()">Print</button>
</div>

<div class="footer">
  <h4>Skema Iuran</h4>
  <table>
    <tr><th>Program</th><th>PU</th><th>BPU</th></tr>
    <tr><td>JKK + JKM</td><td>0,54% Upah</td><td>Rp16.800</td></tr>
    <tr><td>JHT</td><td>5,7% Upah</td><td>Rp20.000</td></tr>
    <tr><td>JP</td><td>3% Upah</td><td>-</td></tr>
  </table>
  Dasar Upah Perhitungan BPU = Rp 1.000.000,-
</div>

</div>

<script>
function formatNumber(v){return Number(v||0).toLocaleString('id-ID');}
function getNumber(id){return parseInt(document.getElementById(id).value.replace(/\./g,''))||0;}

document.addEventListener('input',e=>{
  if(e.target.classList.contains('input-number')){
    let raw=e.target.value.replace(/[^0-9]/g,'');
    e.target.value=formatNumber(raw);
  }
});

const metode=document.getElementById('metode');
metode.onchange=()=>{
  boxSasaran.classList.add('hidden');boxAnggaran.classList.add('hidden');hasil.classList.add('hidden');
  if(metode.value==='sasaran')boxSasaran.classList.remove('hidden');
  if(metode.value==='anggaran')boxAnggaran.classList.remove('hidden');
};

s_nonasn.onchange=()=>sasaranNonASN.classList.toggle('hidden',!s_nonasn.checked);
s_bpu.onchange=()=>sasaranBPU.classList.toggle('hidden',!s_bpu.checked);
a_nonasn.onchange=()=>angNonASN.classList.toggle('hidden',!a_nonasn.checked);
a_bpu.onchange=()=>angBPU.classList.toggle('hidden',!a_bpu.checked);

tujuan.onchange=()=>{
  const orang=tujuan.value==='bulan';
  lblOrgA.style.display=orang?'block':'none';orgA.style.display=orang?'block':'none';
  lblOrgB.style.display=orang?'block':'none';orgB.style.display=orang?'block':'none';
  lblBlnA.style.display=orang?'none':'block';blnA.style.display=orang?'none':'block';
  lblBlnB.style.display=orang?'none':'block';blnB.style.display=orang?'none':'block';
};

function hitungSasaran(){
  tabel.innerHTML=tabel.rows[0].outerHTML;let total=0;
  if(s_nonasn.checked){
    let upah=getNumber('upahS'),org=getNumber('orgSNon'),bln=getNumber('blnSNon');
    let tarif=0.0054+(jhtSNon.checked?0.057:0)+(jpSNon.checked?0.03:0);
    let per=upah*tarif,sub=per*org*bln;total+=sub;
    tabel.innerHTML+=`<tr><td>PU</td><td>${formatNumber(org)}</td><td>${formatNumber(bln)}</td><td>Rp ${formatNumber(per)}</td><td>Rp ${formatNumber(sub)}</td></tr>`;
  }
  if(s_bpu.checked){
    let org=getNumber('orgSBPU'),bln=getNumber('blnSBPU');
    let per=16800+(jhtSBPU.checked?20000:0),sub=per*org*bln;total+=sub;
    tabel.innerHTML+=`<tr><td>BPU</td><td>${formatNumber(org)}</td><td>${formatNumber(bln)}</td><td>Rp ${formatNumber(per)}</td><td>Rp ${formatNumber(sub)}</td></tr>`;
  }
  tabel.innerHTML+=`<tr><th colspan=4>TOTAL</th><th>Rp ${formatNumber(total)}</th></tr>`;
  kesimpulan.innerHTML=`Simulasi ini menunjukkan kebutuhan anggaran sebesar <b>Rp ${formatNumber(total)}</b> untuk mendukung perlindungan pekerja.`;
  hasil.classList.remove('hidden');
}

function hitungAnggaran(){
  tabel.innerHTML=tabel.rows[0].outerHTML;let ang=getNumber('totalAnggaran');
  let bagian=(a_nonasn.checked&&a_bpu.checked)?ang/2:ang;let total=0;
  if(a_nonasn.checked){
    let upah=getNumber('upahA'),org=getNumber('orgA'),bln=getNumber('blnA');
    let tarif=0.0054+(jhtA.checked?0.057:0)+(jpA.checked?0.03:0);
    if(tujuan.value==='orang'){
      let per=upah*tarif*bln,orang=Math.floor(bagian/per),sub=orang*per;total+=sub;
      tabel.innerHTML+=`<tr><td>PU</td><td>${formatNumber(orang)}</td><td>${formatNumber(bln)}</td><td>Rp ${formatNumber(upah*tarif)}</td><td>Rp ${formatNumber(sub)}</td></tr>`;
    }else{
      let per=upah*tarif*org,bulan=Math.floor(bagian/per),sub=bulan*per;total+=sub;
      tabel.innerHTML+=`<tr><td>PU</td><td>${formatNumber(org)}</td><td>${formatNumber(bulan)}</td><td>Rp ${formatNumber(upah*tarif)}</td><td>Rp ${formatNumber(sub)}</td></tr>`;
    }
  }
  if(a_bpu.checked){
    let org=getNumber('orgB'),bln=getNumber('blnB');
    let per=16800+(jhtB.checked?20000:0);
    if(tujuan.value==='orang'){
      let perOrg=per*bln,orang=Math.floor(bagian/perOrg),sub=orang*perOrg;total+=sub;
      tabel.innerHTML+=`<tr><td>BPU</td><td>${formatNumber(orang)}</td><td>${formatNumber(bln)}</td><td>Rp ${formatNumber(per)}</td><td>Rp ${formatNumber(sub)}</td></tr>`;
    }else{
      let perOrg=per*org,bulan=Math.floor(bagian/perOrg),sub=bulan*perOrg;total+=sub;
      tabel.innerHTML+=`<tr><td>BPU</td><td>${formatNumber(org)}</td><td>${formatNumber(bulan)}</td><td>Rp ${formatNumber(per)}</td><td>Rp ${formatNumber(sub)}</td></tr>`;
    }
  }
  let sisa=ang-total;
  tabel.innerHTML+=`<tr><th colspan=4>SISA ANGGARAN</th><th>Rp ${formatNumber(sisa)}</th></tr>`;
  kesimpulan.innerHTML=`Simulasi ini menunjukkan optimalisasi pemanfaatan anggaran. Total anggaran <b>Rp ${formatNumber(ang)}</b> digunakan sebesar <b>Rp ${formatNumber(total)}</b> dengan sisa <b>Rp ${formatNumber(sisa)}</b>.`;
  hasil.classList.remove('hidden');
}
</script>
</body>
</html>
